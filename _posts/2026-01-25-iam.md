---
title: "IAM"
date: 2026-01-25 00:00:00 +0530
tags: [iam, iam enumeration]
author: 0xmr
image: /assets/img/posts/iam.webp
---



# ⛈️ IAM
IAM Stands for Identity and Access Management (IAM).It is a framework used in cloud computing to control and Manage.
- Who can access: This includes users, applications, and services that require entry to the system.
- What can be accessed: This pertains to resources, data, and applications that are available to authorized entities.
- Under what conditions: This involves defining permissions, policies, and authentication methods to regulate access.

`IAM ensures secure and controlled access to cloud resources.`
```bash 
# Put all details like Access key, Secret keys, Region and Formate.
aws configure --profile <Profile Name> 

# whoami command
aws sts get-caller-identity --profile <Profile Name>
```

## Users
Users represent people or applications. They have long-term credentials like usernames, passwords, and access keys.
- Types:
     - End Users: Typical users who access applications and services.
     - Service Accounts: Non-human accounts used by applications or services to interact with other services.

```bash
# Get User Detail
aws iam get-user --profile <Profile Name>

# list Users in IAM
aws iam list-users --profile <Profile Name>

# List Access Keys (single user have two access keys, if 1 is there so u can create a second one as a backdoor)
aws iam list-access-keys --profile <Profile Name>
```     
     
##  Groups
Groups are just a way to manage permissions for multiple users at once.    
- Example
If I have five backend engineers at Hack Smarter who all need the same access, it’s a lot easier to stick them in a group and apply one policy to the group rather than duplicating it across five users.

```bash
# check in which Group are in
aws iam list-groups-for-user --user-name <User Name> --profile <Profile Name>

# List all Available Groups
aws iam list-groups --profile <Profile Name>

# List all Users in Groups
aws iam get-group --group-name <Group Name> --profile <Profile Name>

# list Group Policies
aws iam list-group-policies --group-name <Group Name> --profile <Profile Name>  

# Detail about Specific Group Policies
aws iam get-group-policy --group-name <Group Name> --policy-name <Policy Name> --profile <Profile Name>

```

##  Policies
-  Rules that define permissions for users and groups regarding access to resources.
-  Policies define what a user, group, or role can and can’t do. They’re written in JSON and attached to IAM entities. 
There are two kinds:-
1. Managed Policies – Reusable across users and groups. These are easier to manage and scale.
2. Inline Policies – Attached directly to one user or group. These are harder to track and often the source of privilege escalation bugs in real-world environments.
`In pentests, most of the misconfigurations, come down to sloppy or forgotten policies—especially inline ones.`

```bash
# list Attached Policies
aws iam list-user-policies --user-name <User Name>--profile <Profile Name>

# Get More Detail about Specific Policies
aws iam get-user-policy --user-name <User Name> policy-name <Policy Name> --profile <Profile Name>
```

## Roles
Roles are like users but without long-term credentials. You assume a role temporarily, and AWS gives you credentials that expire after a set time. 
- Example:-
    - if I’m a security analyst investigating an incident, I might assume a role that gives me access to logs for a few hours and then loses access when I’m done. Roles help enforce the principle of least privilege.
 
```bash
# list Roles
aws iam list-roles --profile <Profile Name>

# Query to Specific Role Names
aws iam list-roles --query "Roles[?RoleName=='Role Name']" --profile <Profile Name>

# List Role Policies
aws iam list-role-policies  --role-name <Role Name> --profile <Profile Name>

# Get Detail About Policies
aws iam get-role-policy  --role-name <Role Name> --policy-name <Policy Name> --profile <Profile Name>
```

## Final check list (what to watch for) 
- Users with excessive permissions.
- Roles that can be assumed.
- Policies that use wildcards (e.g., "Action": "*" or "Resource": "*").
- Services or Lambda functions with elevated permissions that you can potentially abuse.
